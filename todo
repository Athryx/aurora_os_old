make thred_new return the correct error code

minor todo:
clean up kernel_heap
